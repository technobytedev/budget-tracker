import{d as oe,r as d,o as se,x as ue,a as g,w as n,u as e,I as ie,b as t,e as q,f as re,g as i,h as G,y as de,z as me,A as pe,B as fe,s as E,C as K,D as ve,E as ge,F as J,G as Q,H as X,J as Z,K as B,i as u,L as y,M as p,N as j,O as ye,P as h,Q as ce,R as M,S as xe,T as $,U as S,V as w,W,X as T,Y as Ie,v as m,Z as Y,t as r}from"./index-CuSIgxrE.js";import{S as be}from"./index-Ceb3IHzC.js";const Te=oe({__name:"Tab2Page",setup(De){const F=d(!1),N=d(!1);d(!1);const V=d(null),_=d(""),c=d(""),x=d(new Date().toISOString()),I=d(new Date().toISOString().slice(0,7)),b=d(""),D=d(""),f=d([]),v=d([]),z=d(),k=new be;se(async()=>{await k.create();const s=await k.get("transactions");Array.isArray(s)?(f.value=s,O()):(f.value=[],v.value=[])}),ue(I,O);const ee=s=>{V.value=s,F.value=!0},C=d(null),te=s=>{C.value=window.setTimeout(()=>{navigator.vibrate&&navigator.vibrate(100),ee(s)},500)},H=()=>{C.value!==null&&(clearTimeout(C.value),C.value=null)};function O(){if(!I.value)return;const[s,a]=I.value.split("-"),o=Number(s),l=Number(a);isNaN(o)||isNaN(l)||(v.value=f.value.filter(A=>{const P=new Date(A.date);return P.getFullYear()===o&&P.getMonth()===l-1}))}const ae=async()=>{f.value=f.value.filter(s=>s.id!==V.value),O(),await k.set("transactions",JSON.parse(JSON.stringify(f.value))),V.value=null,N.value=!0,_.value="Transaction deleted successfully."},ne=async()=>{if(!c.value||!x.value||!b.value||!D.value){console.warn("All fields are required.");return}const s={id:crypto.randomUUID(),amount:parseFloat(parseFloat(c.value).toFixed(2)),date:x.value,category:b.value,notes:D.value};f.value.push(s),await k.set("transactions",JSON.parse(JSON.stringify(f.value))),N.value=!0,_.value="Transaction added successfully.",c.value="",x.value=new Date().toISOString(),b.value="",D.value="",O(),R()},R=()=>{var s;return(s=z.value)==null?void 0:s.$el.dismiss(null,"cancel")};function U(s){return s?new Date(s).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}):""}function L(s){return new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(s)}const le=[{text:"Cancel",role:"cancel",handler:()=>{V.value=null}},{text:"Delete",role:"destructive",handler:ae}];return(s,a)=>(m(),g(e(ie),null,{default:n(()=>[t(e(G),null,{default:n(()=>[t(e(q),null,{default:n(()=>[t(e(re),{style:{"padding-top":"20px"}},{default:n(()=>a[8]||(a[8]=[i("Transactions")])),_:1})]),_:1})]),_:1}),t(e(E),{fullscreen:!0},{default:n(()=>[t(e(de),{slot:"fixed",vertical:"bottom",horizontal:"end",id:"open-modal",expand:"block"},{default:n(()=>[t(e(me),{class:"appPrimary"},{default:n(()=>[t(e(pe),{icon:e(fe)},null,8,["icon"])]),_:1})]),_:1}),t(e(E),{fullscreen:!0,"scroll-y":"","keyboard-attach":"",style:{margin:"10px!important"}},{default:n(()=>[t(e(K),{icon:e(ve),datetime:"topdatetime",presentation:"month-year",style:{"margin-top":"20px"},class:"custom-datetime-btn"},null,8,["icon"]),t(e(ge),{"is-open":N.value,message:_.value,duration:2e3,onDidDismiss:a[0]||(a[0]=o=>N.value=!1)},null,8,["is-open","message"]),t(e(J),{"keep-contents-mounted":""},{default:n(()=>[t(e(Q),{id:"topdatetime",modelValue:I.value,"onUpdate:modelValue":a[1]||(a[1]=o=>I.value=o),presentation:"month-year","show-default-buttons":""},null,8,["modelValue"])]),_:1}),t(e(J),{ref_key:"modal",ref:z,trigger:"open-modal"},{default:n(()=>[t(e(G),null,{default:n(()=>[t(e(q),{style:{"margin-top":"20px"}},{default:n(()=>[t(e(X),{slot:"start"},{default:n(()=>[t(e(Z),{onClick:a[2]||(a[2]=o=>R())},{default:n(()=>a[9]||(a[9]=[i("Cancel")])),_:1})]),_:1}),t(e(X),{slot:"end"},{default:n(()=>[t(e(Z),{strong:"",onClick:ne},{default:n(()=>a[10]||(a[10]=[i("Save")])),_:1})]),_:1})]),_:1})]),_:1}),t(e(E),{fullscreen:!0,class:"ion-padding"},{default:n(()=>[t(e(B),{class:""},{default:n(()=>[a[17]||(a[17]=u("h6",{style:{"text-align":"center"}},"New Transaction",-1)),t(e(y),null,{default:n(()=>[t(e(p),{position:"floating",style:{"margin-bottom":"10px"}},{default:n(()=>a[11]||(a[11]=[i("Amount")])),_:1}),t(e(j),{modelValue:c.value,"onUpdate:modelValue":a[3]||(a[3]=o=>c.value=o),type:"number",inputmode:"decimal",placeholder:"100.00"},null,8,["modelValue"])]),_:1}),t(e(y),{class:"ion-margin-top"},{default:n(()=>[t(e(p),{position:"floating",style:{"margin-bottom":"10px"}},{default:n(()=>a[12]||(a[12]=[i("Category")])),_:1}),t(e(ye),{modelValue:b.value,"onUpdate:modelValue":a[4]||(a[4]=o=>b.value=o),interface:"popover",placeholder:"Select Category"},{default:n(()=>[t(e(h),{value:"income"},{default:n(()=>a[13]||(a[13]=[i("Income")])),_:1}),t(e(h),{value:"expenses"},{default:n(()=>a[14]||(a[14]=[i("Expenses")])),_:1})]),_:1},8,["modelValue"])]),_:1}),t(e(y),{class:"ion-margin-top"},{default:n(()=>[t(e(p),{position:"floating",style:{"margin-bottom":"25px"}},{default:n(()=>a[15]||(a[15]=[i("Date:")])),_:1}),t(e(K),{datetime:"datetime",presentation:"date",style:{"margin-bottom":"20px"}}),t(e(J),{"keep-contents-mounted":""},{default:n(()=>[t(e(Q),{id:"datetime",presentation:"date",modelValue:x.value,"onUpdate:modelValue":a[5]||(a[5]=o=>x.value=o),"show-default-buttons":""},null,8,["modelValue"])]),_:1})]),_:1}),t(e(y),{class:"ion-margin-top"},{default:n(()=>[t(e(p),{position:"floating",style:{"margin-bottom":"10px"}},{default:n(()=>a[16]||(a[16]=[i("Notes")])),_:1}),t(e(j),{modelValue:D.value,"onUpdate:modelValue":a[6]||(a[6]=o=>D.value=o),placeholder:"Enter notes..."},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},512),t(e(ce),null,{default:n(()=>[t(e(M),{value:"first","content-id":"first"},{default:n(()=>[t(e(p),null,{default:n(()=>a[18]||(a[18]=[i("All")])),_:1})]),_:1}),t(e(M),{value:"second","content-id":"second"},{default:n(()=>[t(e(p),null,{default:n(()=>a[19]||(a[19]=[i("Income")])),_:1})]),_:1}),t(e(M),{value:"third","content-id":"third"},{default:n(()=>[t(e(p),null,{default:n(()=>a[20]||(a[20]=[i("Expenses")])),_:1})]),_:1})]),_:1}),t(e(xe),{padding:"true","scroll-y":""},{default:n(()=>[t(e($),{id:"first",class:"transactionWrapper"},{default:n(()=>{var o;return[((o=v.value)==null?void 0:o.length)>0?(m(),g(e(B),{key:0},{default:n(()=>[(m(!0),w(T,null,W(v.value,(l,A)=>(m(),g(e(y),{button:"",key:l.id,onTouchstart:P=>te(l.id),onTouchend:H,onTouchcancel:H},{default:n(()=>[t(e(p),{style:{margin:"5px!important"}},{default:n(()=>[u("h2",null,[a[21]||(a[21]=i(" Amount: ")),u("span",{class:Y(l.category=="expenses"?"text-red":"text-green")},r(l.category=="expenses"?"-":"+")+" "+r(L(l.amount)),3)]),u("p",null,"Date: "+r(U(l.date)),1),u("p",null,"Category: "+r(l.category),1),u("p",null,"Notes: "+r(l.notes),1)]),_:2},1024)]),_:2},1032,["onTouchstart"]))),128))]),_:1})):S("",!0)]}),_:1}),t(e($),{id:"second",class:"transactionWrapper"},{default:n(()=>{var o;return[((o=v.value)==null?void 0:o.length)>0?(m(),g(e(B),{key:0},{default:n(()=>[(m(!0),w(T,null,W(v.value,(l,A)=>(m(),w(T,{key:l.id},[l.category=="income"?(m(),g(e(y),{key:0,button:""},{default:n(()=>[t(e(p),{style:{margin:"5px!important"}},{default:n(()=>[u("h2",null,[a[22]||(a[22]=i(" Amount: ")),u("span",{class:Y(l.category=="expenses"?"text-red":"text-green")},r(l.category=="expenses"?"-":"+")+" "+r(L(l.amount)),3)]),u("p",null,"Date: "+r(U(l.date)),1),u("p",null,"Category: "+r(l.category),1),u("p",null,"Notes: "+r(l.notes),1)]),_:2},1024)]),_:2},1024)):S("",!0)],64))),128))]),_:1})):S("",!0)]}),_:1}),t(e($),{id:"third",class:"transactionWrapper"},{default:n(()=>{var o;return[((o=v.value)==null?void 0:o.length)>0?(m(),g(e(B),{key:0},{default:n(()=>[(m(!0),w(T,null,W(v.value,(l,A)=>(m(),w(T,{key:l.id},[l.category=="expenses"?(m(),g(e(y),{key:0,button:""},{default:n(()=>[t(e(p),{style:{margin:"5px!important"}},{default:n(()=>[u("h2",null,[a[23]||(a[23]=i(" Amount: ")),u("span",{class:Y(l.category=="expenses"?"text-red":"text-green")},r(l.category=="expenses"?"-":"+")+" "+r(L(l.amount)),3)]),u("p",null,"Date: "+r(U(l.date)),1),u("p",null,"Category: "+r(l.category),1),u("p",null,"Notes: "+r(l.notes),1)]),_:2},1024)]),_:2},1024)):S("",!0)],64))),128))]),_:1})):S("",!0)]}),_:1})]),_:1}),t(e(Ie),{"is-open":F.value,header:"Delete this transaction?",message:"Once deleted, this record cannot be recovered.",buttons:le,onDidDismiss:a[7]||(a[7]=o=>F.value=!1)},null,8,["is-open"])]),_:1})]),_:1})]),_:1}))}});export{Te as default};
